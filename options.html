<!DOCTYPE HTML>
<html>
<head>
	<title>MS Paint Adventures Extras Options</title>
	<script src="jquery.js"></script>
	<script src="settings.js"></script>
	<script>
		$(function(){
			function update() {
				settings.keys.next = $('#key-next').val();
				settings.keys.back = $('#key-back').val();
				settings.keys.silence = $('#key-silence').val();
				
				settings.tts.enabled = $('#tts').is(':checked');
				settings.tts.title = $('#tts-title').is(':checked');
				settings.tts.caption = $('#tts-caption').is(':checked');
				settings.tts.action = $('#tts-action').is(':checked');
				settings.tts.options.rate = parseFloat($('#tts-rate').val(),10);
				settings.tts.options.voiceName = $('#tts-voice').val();
				saveSettings(settings);
			}
			$('input').bind('input',update);
			$('input,select').change(update);
			
			$('#key-next').val(settings.keys.next);
			$('#key-back').val(settings.keys.back);
			$('#key-silence').val(settings.keys.silence);
			
			if(settings.tts.enabled) $('#tts').attr('checked','checked');
			if(settings.tts.title) $('#tts-title').attr('checked','checked');
			if(settings.tts.caption) $('#tts-caption').attr('checked','checked');
			if(settings.tts.action) $('#tts-action').attr('checked','checked');
			$('#tts-rate').val(settings.tts.options.rate);
			chrome.tts.getVoices(function(voices){
				for(i in voices) {
					$('#tts-voice').append('<option>');
					$('#tts-voice option:last').text(voices[i].voiceName)
											   .val(voices[i].voiceName);
					if(settings.tts.options.voiceName==voices[i].voiceName) $('#tts-voice option:last').attr('selected','selected');
				}
				if(!voices.length) $('#noVoicesWarning').show();
			});
			$('.keycode').keydown(function(e){
				this.value = e.which;
				update();
				return false;
			});
			update();
		});
	</script>
	<style>
		.keycode { width: 30px; }
		#noVoicesWarning {
			font-style: italic;
			color: red;
			display: none;
		}
		#author { text-align: right; }
	</style>
</head>
<body>
	<h1>MS Paint Adventures Extras Options</h1>
	
	<h3>Keyboard Shortcuts</h3>
	<i>Note: These are key codes. Press the desired key in the input box to set the shortcut.</i><br>
	<label for="key-next">Next</label> <input id="key-next" class="keycode"> <i>Default: Right arrow</i><br>
	<label for="key-back">Back</label> <input id="key-back" class="keycode"> <i>Default: Left arrow</i><br>
	<label for="key-silence">Silence</label> <input id="key-silence" class="keycode"> <i>Default: S</i><br>

	<h3>TTS Settings</h3>
	<input type="checkbox" id="tts"/> <label for="tts">Enable text-to-speech</label><br>
	Read:<br>
	<div style="padding-left:15px;">
		<input type="checkbox" id="tts-title"/> <label for="tts-title">Title</label><br>
		<input type="checkbox" id="tts-caption"/> <label for="tts-caption">Caption</label><br>
		<input type="checkbox" id="tts-action"/> <label for="tts-action">Next Action</label><br>
	</div>
	<label for="tts-rate">Speech rate</label> <input type="number" min=".1" max="10" step=".1" id="tts-rate"/><br>
	<label for="tts-voice">Voice</label>
	<select id="tts-voice">
		<option value="">Default</option>	
	</select>
	<a href="https://chrome.google.com/webstore/category/extensions" target="_blank">Get More</a><br>
	<div id="noVoicesWarning">Warning: You have no voices installed. TTS will not work.</div>
	
	<div id="author">
		Author: <a href="http://www.kiefferjoneswebdesign.com/">Owen Kieffer-Jones</a><br>
		Licensed under the <a href="LICENSE.txt">MIT License</a>. (<a href="http://github.com/okj579/MS-Paint-Adventures-Extras">Source</a>)
	</div>
</body>
</html>